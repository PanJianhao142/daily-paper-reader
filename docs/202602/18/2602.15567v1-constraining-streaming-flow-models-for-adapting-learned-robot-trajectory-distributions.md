---
title: Constraining Streaming Flow Models for Adapting Learned Robot Trajectory Distributions
title_zh: 约束流式流模型以调整已学习的机器人轨迹分布
authors: "Jieting Long, Dechuan Liu, Weidong Cai, Ian Manchester, Weiming Zhi"
date: 2026-02-17
pdf: "https://arxiv.org/pdf/2602.15567v1"
tags: ["keyword:FM", "query:课题"]
score: 6.0
evidence: 用于机器人轨迹生成的流模型
tldr: 针对机器人运动分布的多模态特性，现有的流策略（SFP）虽能生成平滑轨迹，但难以在训练后灵活适应安全约束。本文提出约束感知流（CASF）框架，通过引入可微距离函数构建局部度量，在执行时实时重塑学习到的速度场。该方法能有效处理关节限制和避障，在保持流策略多模态和反应性特征的同时，确保轨迹的安全性与可行性，在仿真和实物实验中均优于传统投影方法。
motivation: 现有的流策略模型缺乏在推理阶段实时调整轨迹以满足安全和任务特定约束的有效机制。
method: 提出CASF框架，利用可微距离函数构建局部度量并拉回到控制空间，通过动态变形速度场来引导机器人避开受限区域。
result: 在模拟和真实世界的机械臂操作任务中，CASF生成的轨迹在满足约束的同时保持了平滑性和动态一致性，表现优于事后投影基准。
conclusion: CASF成功地将硬性约束集成到生成式流模型中，为机器人提供了兼具灵活性与安全性的实时轨迹生成方案。
---

## 摘要
机器人运动分布通常表现出多模态性，需要灵活的生成模型来进行准确表征。流式流策略（SFPs）最近作为一种强大的范式出现，通过在动作空间中直接积分学习到的速度场来生成机器人轨迹，从而实现平滑且具有反应性的控制。然而，现有的公式缺乏在训练后调整轨迹以强制执行安全和特定任务约束的机制。我们提出了约束感知流式流（CASF），这是一个通过与约束相关的度量来增强流式流策略的框架，这些度量在执行过程中重塑学习到的速度场。CASF 将定义在机器人工作空间或配置空间中的每个约束建模为可微距离函数，该函数被转换为局部度量并拉回到机器人的控制空间。在远离受限区域的地方，生成的度量退化为单位阵；在约束边界附近，它平滑地衰减或重定向运动，有效地变形底层流以维持安全性。这使得轨迹能够实时调整，确保机器人动作遵守关节限制、避免碰撞并保持在可行工作空间内，同时保留流式流策略的多模态和反应性特征。我们在模拟和现实世界的操纵任务中演示了 CASF，结果表明它生成的满足约束的轨迹保持了平滑性、可行性和动力学一致性，优于标准的后验投影基准。

## Abstract
Robot motion distributions often exhibit multi-modality and require flexible generative models for accurate representation. Streaming Flow Policies (SFPs) have recently emerged as a powerful paradigm for generating robot trajectories by integrating learned velocity fields directly in action space, enabling smooth and reactive control. However, existing formulations lack mechanisms for adapting trajectories post-training to enforce safety and task-specific constraints. We propose Constraint-Aware Streaming Flow (CASF), a framework that augments streaming flow policies with constraint-dependent metrics that reshape the learned velocity field during execution. CASF models each constraint, defined in either the robot's workspace or configuration space, as a differentiable distance function that is converted into a local metric and pulled back into the robot's control space. Far from restricted regions, the resulting metric reduces to the identity; near constraint boundaries, it smoothly attenuates or redirects motion, effectively deforming the underlying flow to maintain safety. This allows trajectories to be adapted in real time, ensuring that robot actions respect joint limits, avoid collisions, and remain within feasible workspaces, while preserving the multi-modal and reactive properties of streaming flow policies. We demonstrate CASF in simulated and real-world manipulation tasks, showing that it produces constraint-satisfying trajectories that remain smooth, feasible, and dynamically consistent, outperforming standard post-hoc projection baselines.